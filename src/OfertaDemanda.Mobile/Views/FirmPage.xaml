<?xml version="1.0" encoding="UTF-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.Maui;assembly=LiveChartsCore.SkiaSharpView.Maui"
             xmlns:views="clr-namespace:OfertaDemanda.Mobile.Views"
             x:Class="OfertaDemanda.Mobile.Views.FirmPage"
             x:Name="Root">
  <Grid RowDefinitions="*,Auto" RowSpacing="12" Padding="12">
    <ScrollView Grid.Row="0" VerticalOptions="FillAndExpand">
      <VerticalStackLayout Spacing="10" BindingContext="{Binding Firm}">
        <Label Text="{Binding Localization[Firm_CostMode_Title]}" FontAttributes="Bold" />
        <Label Text="{Binding Localization[Firm_TotalCost_Label]}" />
        <Entry Text="{Binding CostExpression}" />

        <Label Text="{Binding Localization[Firm_Mode_Label]}" />
        <Picker ItemsSource="{Binding ModeOptions}"
                SelectedItem="{Binding SelectedMode}"
                ItemDisplayBinding="{Binding Label}" />

        <Label Text="{Binding Localization[Firm_MarketPrice_Label]}" />
        <Slider Minimum="10" Maximum="100" Value="{Binding Price}" IsEnabled="{Binding IsPriceEditable}" />
        <Label Text="{Binding CurrentPriceText}" FontSize="12" />

        <Label Text="{Binding Localization[Common_Results]}" FontAttributes="Bold" Margin="0,10,0,0" />
        <FlexLayout Wrap="Wrap">
          <Label Text="{Binding QuantityText}" Margin="0,0,8,0" />
          <Label Text="{Binding PriceText}" Margin="0,0,8,0" />
          <Label Text="{Binding ProfitText}" Margin="0,0,8,0" />
        </FlexLayout>

        <Label Text="{Binding Localization[Firm_Visualization_Title]}" FontAttributes="Bold" Margin="0,10,0,0" />
        <HorizontalStackLayout Spacing="8">
          <CheckBox IsChecked="{Binding Source={x:Reference Root}, Path=BindingContext.ShowIsoBenefitPanel}" />
          <Label Text="{Binding Localization[Firm_Toggle_IsoBenefit]}" />
        </HorizontalStackLayout>

        <Frame IsVisible="{Binding HasErrors}" BackgroundColor="#FFF0F0" Padding="8" CornerRadius="6">
          <VerticalStackLayout>
            <Label Text="{Binding Localization[Common_Errors]}" FontAttributes="Bold" />
            <VerticalStackLayout BindableLayout.ItemsSource="{Binding Errors}" Spacing="2">
              <BindableLayout.ItemTemplate>
                <DataTemplate>
                  <Label Text="â€¢ {Binding .}" />
                </DataTemplate>
              </BindableLayout.ItemTemplate>
            </VerticalStackLayout>
          </VerticalStackLayout>
        </Frame>
      </VerticalStackLayout>
    </ScrollView>

    <lvc:CartesianChart Grid.Row="1"
                        Series="{Binding Firm.Series}"
                        XAxes="{Binding Firm.XAxes}"
                        YAxes="{Binding Firm.YAxes}"
                        LegendPosition="Right"
                        HeightRequest="260"
                        IsVisible="{Binding ShowFirmChart}" />
    <views:IsoBenefitView Grid.Row="1"
                          BindingContext="{Binding IsoBenefit}"
                          IsVisible="{Binding ShowIsoBenefitPanel}" />
  </Grid>
</ContentView>
