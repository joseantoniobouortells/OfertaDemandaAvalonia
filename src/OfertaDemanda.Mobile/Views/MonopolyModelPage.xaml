<?xml version="1.0" encoding="UTF-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.Maui;assembly=LiveChartsCore.SkiaSharpView.Maui"
             xmlns:controls="clr-namespace:OfertaDemanda.Mobile.Controls"
             x:Class="OfertaDemanda.Mobile.Views.MonopolyModelPage">
  <Grid RowDefinitions="*,Auto" RowSpacing="12" Padding="12">
    <ScrollView Grid.Row="0" VerticalOptions="FillAndExpand">
      <VerticalStackLayout Spacing="10">
        <Label Text="{Binding Localization[Monopoly_DemandInverse_Label]}" FontAttributes="Bold" />
        <Entry Text="{Binding DemandExpression}" />
        <Label Text="{Binding Localization[Monopoly_TotalCost_Label]}" />
        <Entry Text="{Binding CostExpression}" />

        <Label Text="{Binding Localization[Common_Results]}" FontAttributes="Bold" Margin="0,10,0,0" />
        <FlexLayout Wrap="Wrap">
          <Label Text="{Binding MonopolyQuantityText}" Margin="0,0,8,0" />
          <Label Text="{Binding MonopolyPriceText}" Margin="0,0,8,0" />
          <Label Text="{Binding ProfitText}" Margin="0,0,8,0" />
        </FlexLayout>

        <Label Text="{Binding Localization[Monopoly_Visualization_Title]}" FontAttributes="Bold" Margin="0,10,0,0" />
        <VerticalStackLayout Spacing="6">
          <HorizontalStackLayout Spacing="8">
            <CheckBox IsChecked="{Binding ShowIsoprofitCurve}" />
            <Label Text="{Binding Localization[Monopoly_Toggle_Isoprofit]}" />
          </HorizontalStackLayout>
          <HorizontalStackLayout Spacing="8">
            <CheckBox IsChecked="{Binding ShowAverageCost}" />
            <Label Text="{Binding Localization[Monopoly_Toggle_AverageCost]}" />
          </HorizontalStackLayout>
          <HorizontalStackLayout Spacing="8">
            <CheckBox IsChecked="{Binding ShowGuideLines}" />
            <Label Text="{Binding Localization[Monopoly_Toggle_Guides]}" />
          </HorizontalStackLayout>
        </VerticalStackLayout>

        <Frame BackgroundColor="#1A1E88E5" Padding="10" CornerRadius="6">
          <VerticalStackLayout Spacing="6">
            <Label Text="{Binding Localization[Common_Explanation]}" FontAttributes="Bold" TextColor="White" />
            <Label Text="{Binding IsoprofitText}" FontSize="12" TextColor="White" />
            <controls:MathView Latex="{Binding IsoprofitTangentLatex}" FontSize="16" />
            <controls:MathView Latex="{Binding IsoprofitProfitLatex}" FontSize="16" />
          </VerticalStackLayout>
        </Frame>

        <Frame IsVisible="{Binding HasErrors}" BackgroundColor="#FFF0F0" Padding="8" CornerRadius="6">
          <VerticalStackLayout>
            <Label Text="{Binding Localization[Common_Errors]}" FontAttributes="Bold" />
            <VerticalStackLayout BindableLayout.ItemsSource="{Binding Errors}" Spacing="2">
              <BindableLayout.ItemTemplate>
                <DataTemplate>
                  <Label Text="â€¢ {Binding .}" />
                </DataTemplate>
              </BindableLayout.ItemTemplate>
            </VerticalStackLayout>
          </VerticalStackLayout>
        </Frame>
      </VerticalStackLayout>
    </ScrollView>

    <lvc:CartesianChart Grid.Row="1"
                        Series="{Binding Series}"
                        XAxes="{Binding XAxes}"
                        YAxes="{Binding YAxes}"
                        LegendPosition="Right"
                        HeightRequest="260" />
  </Grid>
</ContentView>
